# 数字孪生可视化
### 1、数据获取与导入
#### 1.1、坐标系知识
- **地理坐标系**：是指通过经纬度来表示地球上任意一点位置的坐标系。常见的地理坐标系包括WGS84（标准坐标系）、GCJ-02（高德）、BD-09（百度坐标系）等。
- **投影坐标系**：是指将地球表面上的点投影到平面上的一种坐标系。常见的投影坐标系包括UTM、高斯-克吕格投影等。
- **地理坐标系与投影坐标系的关系**：地理坐标系是地球表面的自然坐标系，而投影坐标系是将地理坐标系中的点投影到平面上的坐标系。
地理坐标系中的点可以通过投影变换转换为投影坐标系中的点，反之亦然。
- <img src="/web/dt01.jpg" alt="坐标系知识图">

#### 1.2、GIS数据获取
- **POI数据**：POI数据是指包含地理位置、名称、类型等信息的数据。可以通过地图API、第三方数据源等方式获取POI数据。
- **获取方法1**
- 1.规划云-[POI查询工具](http://www.guihuayun.com/poi/)，复制粘贴到WPS,保存为txt文件
- 2.在QGis中打开，图层>添加图层>添加分隔文本图层>出现乱码情况,在编码GB2312与UTF-8中试>填横坐标纵坐标>几何坐标参考系：EPSG:4326-WGS84
- **获取方法2**
- 1.使用百度、高德地图API批量获取POI数据
- 2.将获取到的POI数据导入QGis中，图层>添加图层>添加 delimited text layer>选择txt文件>分隔符：逗号>字段分隔符：逗号>
横坐标：经度>纵坐标：纬度>几何坐标参考系：EPSG:4326-WGS84

#### 1.3、行政区域下载
- **行政区域**：是指国家、省、市、县、乡镇等行政区划的边界数据。可以通过地图API、第三方数据源等方式获取行政区域数据。
- 1.规划云下载：http://www.guihuayun.com/maps/region.php
- 2.阿里云DataV下载：https://datav.aliyun.com/portal/school/atlas/area_selector
- 3.易知微地图下载：https://map.easyv.cloud/
- 4.水经注GIS地理信息数据下载器（付费）
#### 1.4、OSM数据获取
- **OSM数据**：OSM数据是指OpenStreetMap（开放街图）项目提供的数据，包括道路、建筑物、河流、植被等地理信息。
可以通过地图API、第三方数据源等方式获取OSM数据。
- https://www.webmap.cn/commres.do?method=dataDownload
- OSM的这个之前介绍过，包含的数据类型也比较多
- 矢量数据下载起来也比较方便

- 1.openstreetmap下载OSM数据：https://www.openstreetmap.org/export#map=15/30.0711/119.9385 
（可能打不开，需要科学上网，且下载面积过大(超过50000)会报错）
- 2.OSM数据下载：https://download.geofabrik.de/asia.html （openstreetmap下载地址，没有zip格式，和bz2格式）
- 3.导入QGis中，主要使用OSM文件中的道路、水系

#### 1.5、建筑shp数据获取
- **建筑shp数据**：是指建筑物的地理信息数据，包括建筑物的位置、形状、高度等信息。
可以通过地图API、第三方数据源等方式获取建筑shp数据。
- 1.水经注下载（水经注下载器）
- 2.图片栅格矢量化处理，获取建筑数据，但无层数
- - 2.1.规划云下载建筑图片
- - 2.2.利用QGIS获取天地图地图
- - - 2.2.1.QGIS中获取天地图，并导出天地图图片
- - - 2.2.2.使用R2V软件 > 转换成灰度 > 设置图像阈值 > 自动矢量化处理

#### 1.6、天地图获取交通路网、水系、湖泊
- 1.天地图下载：http://lbs.tianditu.gov.cn/data/dataapi.html
- 2.利用QGIS获取天地图行政区、水系、居民地等矢量数据
- 3.天地图交通、水系下等图层类型总结
- 成果数据组织：目前提供下载的1:100万地形数据共有5个数据集12个数据层，数据分层的命名采用四个字符，第一个字符代表数据分类，第二三个字符是数据内容
的缩写，第四个字符代表几何类型，内容见下表：

| 要素分类      | 数据分层     | 命名缩写 | 集合类型 | 主要要素内容                            |
|-----------|----------|------|------|-----------------------------------|
| 水系（H）     | 水系（面）    | HYDA | 面    | 湖泊、水库、双线河流等                       |
|           | 水系（线）    | HYDL | 线    | 单线河流、沟渠、河流结构线等                    |
|           | 水系（点）    | HYDP | 点    | 泉、井等                              |
| 居民地及设施（R） | 居民地（面）   | RESA | 面    | 居民地                               |
|           | 居民地（点）   | RESP | 点    | 普通房屋、蒙古包、放牧点等                     |
| 交通（L）     | 铁路       | LRRL | 线    | 标准轨铁路、窄轨铁路等                       |
|           | 公路       | LRDL | 线    | 国道、省道、县道、乡道、其他公路、街道、乡村道路等         |
| 境界与政区（B）  | 行政境界（面）  | BOUA | 面    | 各级行政区                             |
|           | 行政境界（线）  | BOUL | 线    | 各级行政境界线                           |
|           | 行政境界（点）  | BOUP | 点    | 领海基点                              |
| 地名及注记（A）  | 居民地地名（点） | AGNP | 点    | 各级行政地名和城乡居民地名称等                   |
|           | 自然地名（点）  | AANP | 点    | 交通要素名、纪念地和古潭名、山名、水系名、海泽地域名、自然地域名等 |
- 文件格式：.shp文件
- [国家基础地理信息中心](https://www.webmap.cn/commres.do?method=dataDownload)
- 自然资源部主管的国家基础地理信息中心所提供的官方数据，数据包含1:100万和1:25万全国基础地理数据库两种比例
- 全国基础地理数据库主要包含：
- - 含行政区（面）
- - 行政境界点（领海基点）
- - 行政境界（线）
- - 水系（点、线、面）
- - 公路、铁路（点、线）
- - 居民地（点、面）
- - 居民地地名（注记点）
- - 自然地名（注记点）
- - 地理空间参考
- - 平面坐标系：2000国家大地坐标系
- - 高程基准：1985国家高程基准
- - 地图投影：分幅数据采用地理坐标，坐标单位为度
- 成果数据组织同上表
- 下载方式也比较简单，首先注册登录后选择你所下载的区域然后直接加入成果车提交，随后即可下载到你所需的mdb数据。

#### 1.7、DEM高程获取
- **DEM高程**： DEM（Digital Elevation Model）数字高程模型，是描述地球表面高程的数字模型，是地理信息系统（GIS）中最为基础的数据。
- 地理空间数据云：https://www.gscloud.cn/search

#### 1.8、卫星影像获取
- **卫星影像**：卫星影像是卫星遥感技术获取的地球表面图像，是地理信息系统（GIS）中最为基础的数据。
- 1.QGIS插件QuickMapServices获取卫星影像底图
- 2.QGIS插件（TianDiTu Tools）获取天地图卫星影像底图
- 3.水经注
- 
